# Socket

：又称为套接字，位于会话层。
- 是在TCP、UDP协议的基础上创建虚拟端口，从而区分同一个主机上不同进程收发的TCP、UDP数据包。
  - 应用层的进程进行通信时，通过IP协议只能定位目标主机，不能定位目标主机上的进程。因此，通常使用Socket进行TCP、UDP通信。
- 简单的情况下，用 `IP:PORT` 两个参数可以确定一个Socket。比如`127.0.0.1:80`。
  - IP ：IPv4或IPv6地址，用于定位主机。
  - PORT ：端口号，用于定位主机上的进程。
- 实际上，Socket通信中的数据包一般包含以下信息：
  - SRC-IP、SRC-PORT ：发送方的Socket。
  - DEST-IP、DEST-PORT ：接收方的Socket。
  - PROTOCOL ：协议，是int型值，默认为0。
    - 如果使用不同的协议，同一主机上的不同进程就可以绑定同一个端口，一个进程也可以重复绑定一个端口。

例：
1. 假设主机A的IP为 10.0.0.1 ，其上有一个进程a，申请使用 TCP 80 端口。
2. 主机A将 TCP 80 端口绑定到进程 a 。
3. 如果其它主机上的进程想与进程A通信，就发送TCP数据包，目标Socket为：10.0.0.1:80
4. 路由器收到TCP包之后，会将它转发给IP相符的主机A。
5. 主机A收到TCP包之后，会将它转发给绑定80端口的进程A。（此过程称为进程A在“监听”80端口）
6. 进程A收到TCP包之后，可以从中发现发送方的Socket，作出回复。

## 端口号

- 端口号是16位的无符号整数，取值范围为 0~65535 。
- 为了避免与系统进程使用的端口号冲突，建议使用1024以上的端口号。
- 一些经常被占用的端口号：
  - FTP协议     ：20、21
  - SSH协议     ：22
  - telnet协议  ：23
  - SMTP协议    ：25
  - HTTP协议    ：80
  - HTTPS协议   ：443
  - Socks协议   ：1080
  - Mysql服务器  ：3306
  - tomcat服务器 ：8080

## Socket API

- 操作系统一般会提供Socket通信的API，比如bind、send、close等。

## ♢ socket

：Python的标准库，用于进行Socket通信。
