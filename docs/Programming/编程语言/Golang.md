# Golang

：Go 语言，一种编译型语言，是强类型语言、静态语言。
- [官方文档](https://golang.org/doc/)
- 于 2009 年由 Google 公司发布。
- 提供了协程机制，处理并发任务的效率高，因此常用于服务器程序开发、云计算领域。

## 语法特点

- 源文件的扩展名为 .go 。
- 每个语句的末尾以换行符或分号 ; 作为分隔符。
- 用 // 声明单行注释。
- 支持定义函数，不支持定义类，但可以通过结构体（struct）实现面向对象编程。
- 会自动回收垃圾内存。

## 变量

- 定义变量的方式有三种：
  - 用关键字 var 定义变量并声明数据类型（如果创建的变量名已存在则会报错）：
    ```go
    var a int        // Go 的特点是将数据类型放在后面声明
    a = 1
    ```
  - 用关键字 var 定义变量并赋值，会自动判断数据类型：
    ```go
    var a = 1
    ```
  - 用 := 定义变量并赋值，会自动判断数据类型：
    ```go
    a := 1
    ```

## 函数

- 例：
  ```go
  func fun1(x int, y string) (int) {
      fmt.Println("%d, %s", x, y)
      defer fmt.Println("done")   // 当函数退出时调用该函数
      return 0
  }

  fun1(1, "a")
  ```

## 协程

Golang 提供了 Goroutines ，可以创建轻量级的协程；还提供了 Channels 机制，用于协程之间的通信。

- 用关键字 go 可以创建一个协程：
    ```go
    go fun1(1, "a")
    ```
  - 当主线程退出时这些协程会被自动终止。

- 协程之间可以通过 channel 类型的变量进行通信：
    ```go
    ch := make(chan int, 100)  // 用关键字 chan 创建一个通道，并设置缓冲区大小为 100
    ch <- 1                    // 写入数据到通道（如果通道不带缓冲或缓冲区已满，则会陷入阻塞）
    v := <-ch                  // 从通道取出数据，并赋值给 v（如果通道为空，则会陷入阻塞）
    close(c)                   // 关闭通道

    for i := range c {         // 遍历通道，如果通道为空就保持阻塞，除非通道被关闭
        fmt.Println(i)
    }
    ```
