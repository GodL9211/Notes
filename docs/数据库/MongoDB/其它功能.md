# 其它功能

## 备份数据

```
mongodump -h 127.0.0.1:27017 -o /root/  # 导出指定MongoDB中的所有数据，保存到指定目录（这会生成多个文件）
                        -d test         # 指定数据库（默认会导出所有数据库）

mongorestore -h 127.0.0.1:27017 /root/  # 导入指定目录下的备份数据
                        -d test         # 导入数据后将数据库命名为test
```

## 索引

- 增
# 输入参数：<keys>, [options]
db.c1.createIndex({"name":1})      # 对一个字段创建索引（1表示升序，-1表示降序）
db.c1.createIndex({"name":1, "description":-1})  # 对多个字段创建索引
  - options是可选参数，常见的设置项如下：
name      ：该索引的名称。未指定的话会自动命名。
unique    ：是否限制该字段的取值唯一。默认为false。
background  ：是否在后台创建索引。默认为false，会阻塞前台进程。
expireAfterSeconds：设置过期时间，过期之后一段时间内会自动删除该文档。（只能作用于Date类型的字段）
v      ：索引的版本号。
- 查
db.c1.getIndexes()      # 显示所有索引
db.c1.totalIndexSize()    # 显示全部索引的大小
- 删
db.c1.dropIndex("name_1")    # 删除指定索引
db.c1.dropIndexes()      # 删除所有索引

