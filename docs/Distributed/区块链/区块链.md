# 区块链

https://en.bitcoin.it/wiki/Category:History


## 数字货币

### 历史

- 2008 年，中本聪（Satoshi Nakamoto）发布一个论文，
- 2017 年 8 月，BTC 发生硬分叉，产生一个新币 Bitcoin Cash（BCH）
  - 将区块大小从 1MB 扩容到 8MB 。
  - 硬分叉之后，拥有 BTC 的原账户依然在 BCH 中存在，并得到等量的 BCH 币。

## 原理

### 白皮书

- 2008 年，中本聪发布了 [比特币白皮书](https://bitcoin.org/bitcoin.pdf) ，设计了比特币（Bitcoin）的最初架构：
  - 去中心化：属于点对点的交易系统。用户可以直接转账给其它用户，不需要经过第三方中介机构。
  - 基于区块链，记录发生过的转账交易，防止被篡改。
    - 工作量证明（Proof-of-Work）：各节点都有权开采新区块，需要进行 CPU 哈希运算。
    - 成功创建新区块的节点，可以获得一定量的比特币。
    - 如果同时存在多条区块链，则最长的那条拥有的工作量证明最多，被各节点接受。


- 与传统的银行转账相比，区块链的特点：
  - 不需要担心中介机构是否诚实可靠、是否批准交易，节约了中介处理的耗时。
  - 隐私（Privacy）：所有转账信息是公开可查的，容易溯源。但账户公钥是匿名的，不需绑定身份信息。

<!--
运行网络的步骤如下:
1)新事务被广播到所有节点。
2)每个节点将新的事务收集到一个块中。
3)每个节点都在为它的块寻找一个困难的工作量证明。
4)当一个节点找到一个工作量证明时，它将该块广播给所有节点。
5)只有当区块中的所有交易都是有效的且未被消费时，节点才接受区块。
节点通过创建下一个区块来表达对该区块的接受链，使用接受块的散列作为前一个散列。
= 节点总是认为最长的链是正确的，并将继续工作扩展它。
- 如果两个节点同时广播下一个块的不同版本，一些节点可以先接收其中一个或另一个。在这种情况下，他们会在收到的第一个文件上工作，
但是要保存另一个分支，以防它变长。当发现下一个校对工作和一个分支变得更长时，这种关系将被打破;在另一个节点上工作的节点分支将切换到较长的分支
- 新的事务广播不一定需要到达所有节点。
- 激励（Incentive）：如果一个贪婪的攻击者能够组装了比所有诚实节点更强大的CPU能力，他应该发现按规则玩（挖矿收益、转账费用）更有利可图，比篡改区块链的收益更大。
- 各节点可以只在磁盘中保存最近的一连串区块，删除较旧的区块。
-->

### 区块

根据比特币协议，一个区块的大小最大是 1MB，而一笔交易大概是500字节左右，因此一个区块最多可以包含2000多笔交易。矿工负责把这2000多笔交易打包在一起，组成一个区块，然后计算这个区块的哈希。

P2P 点对点网络，每个节点会将消息传播给其它节点

### 转账

转账流程：
- 用账户发出一笔转账，公布到网络上。
- 矿工验证这笔转账，是否有效。
- 矿工将这笔转账的信息写入区块链。


矿工们总是优先处理手续费最高的交易

比特币协议规定，申报交易的时候，除了交易金额，转出比特币的一方还必须提供以下数据。
- 上一笔交易的 Hash（你从哪里得到这些比特币）
- 本次交易双方的地址
- 支付方的公钥
- 支付方的私钥生成的数字签名

验证这笔交易是否属实，需要三步：
- 第一步，找到上一笔交易，确认支付方的比特币来源。
- 第二步，算出支付方公钥的指纹，确认与支付方的地址一致，从而保证公钥属实。
- 第三步，使用公钥去解开数字签名，保证私钥属实。


确认交易的真实性以后，交易数据必须写入区块链的区块，才算完成。


## 相关概念

- [bitcoin.org](https://bitcoin.org/)
  - https://bitcoin.org/en/resources
  - https://developer.bitcoin.org/

- 区块链浏览器（Explorer）
  - ：一种 Web 网站，用于查看、搜索 BTC、ETH 等数字货币的区块链信息，比如每个区块包含的所有交易、每笔交易的内容、每个地址的余额。
  - blockchain.com 、BTC.com 网站提供了多个主流币种的区块链浏览器。

- 钱包（wallet）
  - ：一种管理数字货币账户的软件，采用 PC 端软件、app 等形式。
  - 数字货币的账户在区块链中记录，任何人都可以自由创建。但普通人不懂如何编程与区块链交互，所以需要用到第三方开发的钱包软件。
  - 主要分类：
    - 冷钱包
      - ：使用时不需要联网，因此私钥不会泄露。
      - 支持离线交易：在离线电脑上发起一笔转账，生成签名，然后拷贝到另一个联网的电脑上，公布到区块链。
    - 热钱包
      - ：使用时需要联网，因此私钥可能泄露。
      - 用户需要担心账户私钥被热钱包恶意窃取，或因为漏洞被攻击。

- 常见矿池：
  - BTC.com ：原本由比特大陆公司经营。2021 年，500 彩票网收购该矿池及域名，并将公司改名为比特矿业。
