# 简介

## 分布式系统

：是指将一个软件系统的各个进程分别部署在多个主机上。
- 小型的软件系统通常只部署在一台计算机上，属于集中式系统。而大型的软件系统通常部署成分布式系统，从而扩展出更多性能。
- 优点：
  - 便于横向扩展系统节点，提高系统容量、性能，比如处理高并发流量。
  - 可以为一个软件应用运行多个实例，提高服务可用性。
  - 可以为一个数据存储多个副本，提高数据安全性。
- 难点：
  - 系统规模变大、结构变复杂，维护麻烦。
  - 比集中式系统多用了一些技术和组件，比如负载均衡、消息队列、分布式锁、分布式数据库、分布式文件系统。
  - 实现分布式系统的一致性。
  - 脑裂（brain split）：集群中出现多个管理节点，产生多种不同的决策。

## 一致性

- 分布式系统的一致性（Consensus）主要是指：保证各个节点作出的决策一致。

- 常见的一致性算法：
  - Paxos
    - 一个节点作为 Proposer 发出某个提议，其它节点作为 Acceptor 参与决策。
    - 主要采用多数派（Majority）策略，即一个决策只要得到大多数节点认可，就会通过。
    - 假设系统包含 N 个节点，则最多容许 `N/2 - 1` 个节点同时故障，否则就不能完成决策。

  - Raft
    - 系统中有且仅有一个节点作为 Leader ，有权作出决策。其它节点作为 Follower ，只能跟随决策。
    - 如果 Leader 故障，则其它节点作为 Candidate ，选举一个节点担任新 Leader 。
    - 每选出一个 Leader ，就开始一次任期（Term）。

  - Bully
    - 与 Raft 类似。如果 Leader 节点故障，则由 ID 最大的一个节点担任新 Leader 。


## Etcd

：一个分布式的键值对数据库。
- 由 CoreOS 团队于 2013 年开源，基于 Golang 开发。
- 采用 Raft 算法实现分布式系统的一致性。
