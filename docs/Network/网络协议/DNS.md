# DNS

## 域名

- 域名（Domain name）是一个字符串，映射到一个 IP 地址，相当于该 IP 地址的别名。
  - 使用 IP 可以定位一个主机，但是 IP 不方便记忆，因此 1980 年代发明了域名。
  - 用户可以在任一域名注册商处购买一个域名，配置解析到某个 IP 。该解析规则会同步到因特网上的所有 DNS 服务器。
  - 一个域名只能映射到一个 IP ，而一个 IP 可以被多个域名映射。
- 域名的命名格式为 `xx[.xx]...` ，由多个字段组成，字段之间用点号分隔。
  - 每个字段只能包含英文字符。不过国际化域名（Internationalized Domain Name ，IDN）支持使用 Unicode 字符，以 ASCII 码的形式存储。
- 域名中的各个字段像目录路径一样划分层级，方向是从右向左，级别递减。最右侧的字段称为顶级域。
  - 因特网上存在多个顶级域，管理顶级域的机构有权分配二级域，管理二级域的机构有权分配三级，以此类推。
    - 例如：顶级域名 com 表示商业组织，cn 表示中国，edu 表示教育机构。
    - 中国的顶级域 cn 由中国因特网信息中心（CNNIC）管理。
  - 例如：`www.kmust.edu.cn` 的结构为 ` 四级域名.三级域名.二级域名.顶级域名 ` 。
    - 如果向管理二级域的机构申请域名，则域名中的顶级域名、二级域名是已经给定的，不能修改，但可以自定义三级域名，自己划分四级域名、五级域名等。

## DNS

：域名系统（Domain Name System），用于解析域名，即将一个域名转换为一个 IP 地址。
- 属于应用层协议，基于 UDP 通信。
- 域名系统属于动态域名解析。
  - 也有静态域名解析的方法，即人工配置主机名与 IP 地址的映射表。
- 域名解析的基本过程：
  1. 当程序客户端要解析一个域名时，先查询自己的 DNS 缓存。若没有命中缓存，则向本地 DNS 服务器发送查询请求。
  2. 如果本地 DNS 服务器也没有该 DNS 记录，则将查询请求转发给上游的 DNS 服务器。最上游的是权威 DNS 服务器。

## DNS 服务器

：用于为其它主机提供 DNS 服务。
- DNS 服务器主要通过 UDP 广播信息，有时也会通过 TCP 发送和接收 DNS 数据库。
- 主要配置内容：
  - 创建正向查找区域，即将域名映射到 IP 地址的数据库。
  - 创建反向查找区域，即将 IP 地址映射到域名的数据库。
  - 增加资源记录，如主机地址资源记录（记录域名所映射的 IP 地址）、邮件交换器资源记录（使 DNS 服务器能解析 E-mail 服务器的地址）等。
