# 终端

：泛指可以让用户操作计算机的设备。
- 比如一个显示器加一个键盘就可以组成一个终端，让用户可以与计算机输入、输出信息。
- 早期的计算机只有一个控制台（console），供用户管理硬件线路。但可以连接多个终端（terminal），供多个用户与计算机交互。
- 电传打字机（Teletype ，tty）：一种早期流行的终端设备。
- 现在的终端可能是真实存在的硬件设备，也可能是虚拟设备。

## GUI 与 CLI

计算机提供给用户的操作界面（即终端界面）主要分为两类：
- 用户图形界面（Graphical User Interface ，GUI）
  - 通常显示了一些图形按钮，用户可以通过键盘、鼠标进行操作。
- 命令行界面（Command Line Interface ，CLI）
  - 通常只显示了字符文本，用户只能通过键盘进行操作，输入一些字符串作为命令，让计算机去执行。
  - Linux 操作系统提供了 CLI 界面，但有的 Linux 发行版也提供了 GUI 界面。

## 终端设备

Linux 中，与终端交互实际上是读写 /dev 目录下的串口设备文件，分为以下几种：
- 控制台设备（console device）：文件名为 `/dev/console` ，用于接收系统内核的一些输出信息，只有 root 用户能读写。
- 虚拟控制台（virtual console）：比如/dev/tty1、/dev/tty2 。
  - `/dev/tty` 指向当前 shell 使用的终端，比如/dev/tty1、/dev/pts/0 。
  - `/dev/tty0` 指向当前 shell 使用的虚拟控制台，只有 root 用户能读写。
  - 例如，如果当前终端为 tty2 ，则执行命令 `echo 1 > /dev/tty2` 或 `echo 1 > /dev/tty` ，都会在当前 shell 中显示 1 。
    具体过程：用户通过键盘输入 echo 1 并按回车执行，该命令会先通过键盘驱动传给 shell 进程，然后被 shell 进程写入/dev/tty2 文件，最后被系统内核处理。系统内核处理完该命令之会通过显示器驱动显示出 1 。
- 伪终端（pseudo terminals ，ptys）：能模拟终端操作的进程。比如在桌面上打开的终端、通过 SSH 登录的终端。
  - 伪终端对应的终端文件保存在 `/dev/pts/` 目录下，比如 /dev/pts/0、/dev/pts/1 。
  - 例如：通过 SSH 登录时，数据会先通过 SSHD 服务传给远程主机上的一个 shell 进程，再写入一个 /dev/pts/0 文件，最后被系统内核处理。
- 串行端口终端（serial ports terminal）：表示通过计算机串行端口连接的终端设备。比如/dev/ttyS1、/dev/ttyS2 。
  - 命令 `echo "Hello World" > /dev/ttyS1` 就是将数据发送到 S1 端口，相当于 DOS 系统的 COM1 。

## 命令行提示符

- 等待用户输入时，终端的左侧会显示命令行提示符。其默认格式为 `[用户名@主机名 当前目录名]用户提示符”` ，如下：
  ```sh
  [root@Centos ~]# 
  ```
- root 用户、普通用户的用户提示符分别为 # 、$ 。

## 终端的快捷键

Linux 终端支持以下快捷键：

关于进程：
- `Ctrl + C` ：终止当前的前台进程（向进程发送 SIGINT 信号）
- `Ctrl + D` ：退出当前 shell（相当于执行命令 exit）
- `Ctrl + Z` ：暂停当前的前台进程，并将它移到后台

关于显示：
- `Ctrl + L` ：清屏，使屏幕上只剩第一行（相当于执行命令 clear）
- `Ctrl + A` ：将光标移动到行首
- `Ctrl + E` ：将光标移动到行尾
- `Ctrl + P` ：显示上一条历史命令
- `Ctrl + N` ：显示下一条历史命令
- `Ctrl + S` ：冻结屏幕的显示
- `Ctrl + Q` ：取消冻结屏幕

关于输入：
- `Tab` ：自动补全。如果只有一个候选项，则按一下会自动补全，否则按两下显示所有候选项
- `Ctrl + U` ：剪切光标之前的所有内容
- `Ctrl + K` ：剪切光标之后的所有内容
- `Ctrl + W` ：剪切光标之前的一个字段（如果连续剪切多次，剪切的内容会拼接成一个字符串）
- `Ctrl + Y` ：粘贴用上述命令剪切的内容
- `Ctrl + Shift + C` ：复制
- `Ctrl + Shift + V` ：粘贴

关于历史命令：
- `Ctrl + R` ：检索历史命令（输入关键词之后，再按下 Ctrl + R 会倒序显示每个匹配项）
- `Ctrl + P` ：切换到历史命令的上一条（provious），相当于按键 ↑
- `Ctrl + N` ：切换到历史命令的下一条（next），相当于按键 ↓
