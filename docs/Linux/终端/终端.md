# 终端

终端：又称为命令行界面、terminal、tty。泛指与计算机交互的设备，可能是真实存在的硬件设备，也可能是虚拟设备。
- 早期的计算机只有一个控制台（console），管理硬件线路。不过可以连接多个终端（terminal），供多个用户与计算机交互。
- 早期的terminal通常是一个显示器加一个键盘。电传打字机（Teletype，tty）就是一种很常见的终端设备。

## 命令行提示符

等待用户输入时，终端的左侧会显示命令行提示符。
- 其格式为 [用户名@主机名 当前目录名]用户提示符”，比如“[leo@localhost ~]$”。
- root用户、普通用户的用户提示符分别为 # 、$ 。

## 终端设备

Linux中，与终端交互实际上是读写/dev目录下的串口设备文件，分为以下几种：
- 控制台设备（console device）：文件名为/dev/console，用于接收系统内核的一些输出信息，只有root用户能读写。
- 虚拟控制台（virtual console）：比如/dev/tty1、/dev/tty2。
  - /dev/tty指向当前shell使用的终端，比如/dev/tty1、/dev/pts/0。
  - /dev/tty0指向当前shell使用的虚拟控制台，只有root用户能读写。
  - 例如，如果当前终端为tty2，则执行命令echo 1 > /dev/tty2或echo 1 > /dev/tty，都会在当前shell中显示1。
    <br>具体过程：用户通过键盘输入echo 1并按回车执行，该命令会先通过键盘驱动传给shell进程，然后被shell进程写入/dev/tty2文件，最后被系统内核处理。系统内核处理完该命令之会通过显示器驱动显示出1。
- 伪终端（pseudo terminals，ptys）：能模拟终端操作的进程。比如在桌面上打开的终端、通过SSH登录的终端。
  - 伪终端对应的终端文件保存在/dev/pts目录下，比如/dev/pts/0、/dev/pts/1。
  - 例如：通过SSH登录时，数据会先通过SSHD服务传给远程主机上的一个shell进程，再写入一个/dev/pts/0文件，最后被系统内核处理。
- 串行端口终端（serial ports terminal）：表示通过计算机串行端口连接的终端设备。比如/dev/ttyS1、/dev/ttyS2。
  - 命令echo "Hello World" > /dev/ttyS1就是将数据发送到S1端口，相当于DOS系统的COM1。

## 终端的快捷键

关于进程：
- Ctrl + C：终止当前的前台进程
- Ctrl + D：退出当前shell（相当于执行命令exit）
- Ctrl + Z：暂停当前的前台进程，并将它移到后台

关于显示：
- Ctrl + L：清屏，使屏幕上只剩第一行（相当于执行命令clear）
- Shift + PageUp/PageDown：向上翻页、向下翻页
- Ctrl + S：冻结屏幕的显示
- Ctrl + Q：取消冻结屏幕

关于输入：
- Tab：自动补全。如果只有一个候选项，则按一下会自动补全，否则按两下显示所有候选项
- Ctrl + U：剪切光标之前的所有内容
- Ctrl + K：剪切光标之后的所有内容
- Ctrl + W：剪切光标之前的一个字段（如果连续剪切多次，剪切的内容会拼接成一个字符串）
- Ctrl + Y：粘贴用上述命令剪切的内容
- Ctrl + Shift + C：复制
- Ctrl + Shift + V：粘贴

关于历史命令：
- Ctrl + R：检索历史命令（输入关键词之后，再按下Ctrl + R会倒序显示每个匹配项）
- Ctrl + P：切换到历史命令的上一条（provious），相当于按键 ↑
- Ctrl + N：切换到历史命令的下一条（next），相当于按键 ↓
