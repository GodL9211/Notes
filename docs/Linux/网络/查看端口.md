# 关于端口

## netstat

用于查看本机网络连接的状态。

<details>
<summary>已淘汰不用</summary>

命令：

```shell
    netstat
        -a  # 显示所有网络连接、socket
        -l  # 只显示LISTEN状态的
        -t  # 只显示tcp的socket
        -u  # 只显示udp的socket
        -x  # 只显示unix socket
        -p  # 显示使用每个网络连接的进程名
```

</details>

## ss

ss：socket statistics，用于查看socket的统计信息。与netstat命令类似，但运行速度更快。

命令：

```shell
ss          # 显示established状态的socket
    -a      # 显示所有状态的socket
    -l      # 只显示被进程listen的socket
    -t      # 只显示TCP协议的端口
    -u      # 只显示UDP协议的端口
    -x      # 只显示本机通信的socket

    -p      # 显示使用每个socket的进程名
    -n      # 不允许用服务名代替端口号（比如默认会把22端口显示成ssh）
    -s      # 增加显示TCP、UDP等类型端口的统计信息
```

例：查看所有TCP端口的信息

```shell
[root@Centos ~]# ss -tapn | cat    # 加上cat使显示的users不换行
State      Recv-Q Send-Q Local Address:Port    Peer Address:Port
LISTEN     0      128    127.0.0.1:34186            *:*              users:(("node",pid=15647,fd=19))
LISTEN     0      128        *:111                  *:*              users:(("systemd",pid=1,fd=51))
LISTEN     0      128        *:22                   *:*              users:(("sshd",pid=3057,fd=3))
```

- Recv-Q、Send-Q：表示接收队列、发送队列中待处理的数据包数。它们最好为0，即没有包堆积。
- 最右端的一列users表示监听每个端口的进程。

例：查看指定端口的信息

```shell
[root@Centos ~]# ss -tapn | grep 8000
LISTEN     0      128         :::8000               :::*             users:(("docker-proxy",pid=18614,fd=4))
```
