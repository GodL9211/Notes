
## 监控策略

- 采用监控工具取代人工巡检，可以更直观地查看系统状态、记录日志，更及时地发现异常。
- 常见的监控指标：
  - CPU 使用率
  - 内存容量
  - 磁盘容量
  - 磁盘 IO 速率
  - 网络 IO 速率
  - 项目进程的数量
    - 建议项目进程提供一个 HTTP API 供监控工具访问，从而反馈自己是否健康。
- 如果开销不大的话，把冷门的指标也采集了，有备无患。
- 将不同的监控指标用不同的颜色标明：
  - 绿色：代表良好状态，或者取值越大越好的指标。
  - 灰色：代表不需要关注。
  - 蓝色：代表正常状态，但是取值越小越好的指标。
  - 黄色：代表轻微异常，可以忽视。
  - 橙色：代表明显异常，需要处理。
  - 红色：代表危险状态，需要立即处理。

## 告警策略

- 当监控系统发现某个指标的值不符合预期时，应该标识为异常状态，并发出告警消息。
- 触发告警的策略：
  - 当调试项目时，可以选择关闭告警。
  - 连续出现异常一段时间（比如 1m ）之后才告警，从而减少误报。
  - 发现异常并触发告警之后，一段时间（比如 1h ）以内不会因为该异常重复触发告警，从而避免报警风暴。但应该记录该异常的持续时间、何时被解决。
- 发送告警的策略：
  - 将不同项目的告警发送给不同的负责人。
  - 低级的告警只保存记录，供运维随机查看、做大数据统计。
  - 严重的告警立即通知相关负责人，如果长时间未解决则通知更高的主管。
- 处理告警的策略：
  - 对于反复出现的告警，应该尝试用脚本自动化解决，比如当进程异常退出时自动重启。
  - 当异常消失时，可以通知用户这个好消息。另一方面，统计所有异常的持续时间、当前依然存在的异常。


