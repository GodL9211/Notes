# 前端安全

## XSS

：跨站脚本攻击（Cross Site Scripting）
- Hacker 向网页源代码中注入恶意代码，然后被浏览器执行。
- 按注入方式分类：
  - 反射型：如果网页源代码会从 URL 中提取参数，则可以把恶意代码写入到 URL 中，诱使用户点击该链接，当用户跳转之后就被注入了恶意代码。
  - 存储型：将恶意代码作为表单内容（比如留言栏）上传到服务器。当其他用户在浏览器中查看该内容时，恶意代码就会被执行。
- 按攻击来源分类：
  - 恶意网站 B 与网站 A 不在同一个域名下。
  - 恶意网站 B 与网站 A 在同一个域名下，比如子应用。
- 防御方法：
  - 服务器不应该信任前端发来的数据，总是要检查该数据是否合法。

## CSRF

：跨站请求伪造（Cross-site request forgery）。
- 例：用户访问网站 A ，保持 session 或留下 cookies 。Hacker 诱使用户点击网站 B 中的一个链接，该链接是向网站 A 发送一个 HTTP 请求，这样就能冒用用户的身份访问网站 A ，执行冒名操作。
- 防御方法：
  - 服务器检查每个 HTTP 请求的 Referer 字段，如果是跨站发来的请求就拒绝。
    - 不过这可能拦截从搜索引擎跳转过来的正常用户请求，也无法防御来自同一个域名的伪造请求。
  - 向网页源代码中加入一个随机 token ，当用户发出 HTTP 请求时都要带上该 token ，证明请求是从该网页发出的。
    - 例如在请求的 URL 中加入 token ：`http://www.test.com?csrftoken=123456`
    - 例如在 POST 表单里加入 token ：`<input type=”hidden” name=”csrftoken” value=”123456”/>`
