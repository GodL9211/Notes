# 前端安全

## XSS

：跨站脚本攻击（Cross Site Scripting）。Hacker向网页源代码中注入恶意代码，然后被浏览器执行。

- 按注入方式分类：
  - 反射型：如果网页源代码会从URL中提取参数，则可以把恶意代码写入到URL中，诱使用户点击该链接，当用户跳转之后就被注入了恶意代码。
  - 存储型：将恶意代码作为表单内容（比如留言栏）上传到服务器。当其他用户在浏览器中查看该内容时，恶意代码就会被执行。

- 按攻击来源分类：
  - 恶意网站B与网站A不在同一个域名下。
  - 恶意网站B与网站A在同一个域名下（比如上架的小应用）。

- 例：用户访问网站A，保持session或留下cookies。Hacker诱使用户点击网站B中的一个链接，该链接是向网站A发送一个HTTP请求，这样就能冒用用户的身份访问网站A，执行冒名操作。

- 危害：
  - 恶意代码被用户的浏览器执行之后，可能窃取用户的cookie等信息、执行冒名操作。
攻击方法：
  - 服务器检查用户上传的信息是否合法。
CSRF：跨站请求伪造（Cross-site request forgery）。

- 防御方法：
  - 服务器检查每个HTTP请求的Referer字段，如果是跨站发来的请求就拒绝。
    不过这可能拦截从搜索引擎跳转过来的正常用户请求，也无法防御来自同一个域名的伪造请求。
  - 向网页源代码中加入一个随机token，当用户发出HTTP请求时都要带上该token，证明请求是从该网页发出的。
    例：
    将GET请求的URL改成：`http://www.test.com?csrftoken=123456`
    在POST表单里加入一行：`<input type=”hidden” name=”csrftoken” value=”123456”/>`
