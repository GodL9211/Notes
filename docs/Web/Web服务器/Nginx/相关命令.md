# 相关命令

## htpasswd

：Apache 提供的一个命令行工具，用于生成密码的哈希值。
- 安装：`yum install httpd-tools`
- 用法：
  ```sh
  htpasswd [file] [username] [password]
          -d                # 采用 CRYPT 算法
          -B                # 采用 BCRYPT 算法
          -m                # 采用 MD5 算法（默认）
          -s                # 采用 SHA-1 算法
          -2                # 采用 SHA-256 算法
          -5                # 采用 SHA-512 算法

          -c                # 创建加密文件，如果该文件已存在则会被覆盖
          -D  <username>    # 从文件中删除一个用户
          -v  <username>    # 验证一个用户的密码

          -b <password>     # 通过命令参数输入明文密码
          -i                # 从 stdin 读取密码
          -n                # 将加密结果输出到 stdout ，而不是文件
  ```
- 例：
  ```sh
  [root@Centos ~]# htpasswd -nb leo 123456            # 生成密码的哈希值
  leo:$apr1$mUtPb9mo$xCZajWWbJ3v42Bxu3WKFi/
  ```
  ```sh
  [root@Centos ~]# htpasswd -cb  ./passwd leo 123456  # 创建密码文件，添加一个用户及其密码
  Adding password for user leo
  [root@Centos ~]# htpasswd -b   ./passwd leo 1234    # 再添加一个用户及其密码。如果该用户名已存在，则会覆盖其密码
  Updating password for user leo
  [root@Centos ~]# htpasswd      ./passwd admin       # 再添加一个用户，默认通过终端提示输入密码
  New password:
  Re-type new password:
  Adding password for user admin
  [root@Centos ~]# cat passwd                         # 查看密码文件
  leo:$apr1$UjGpt1b7$aEIT6s.Kh/KMyjJ/z.men0
  admin:$apr1$cF7RBJdh$FGmchgxnb0gXV6GeY8PGH/
  [root@Centos ~]# htpasswd -D   ./passwd leo         # 删除一个用户
  Deleting password for user leo
  ```

## OpenSSL

：一个关于 SSL 的开源工具包。
- 例：生成 SSL 私钥和自签名证书：
  ```sh
  openssl
          req -x509           # 生成自签名的数字证书，采用 X.509 标准
          -days 365           # 证书的有效期
          -newkey rsa:2048    # 使用新生成的密钥
          -nodes              # no DES ，生成 key 文件时不加密
          -keyout cert.key    # 保存私钥的文件
          -out cert.crt       # 保存证书的文件
  ```
- 一般的浏览器不会承认自签名证书，会警告该网站不安全。
