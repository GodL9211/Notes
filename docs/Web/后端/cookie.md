# cookie

虽然 HTTP 通信是无状态的，但可以通过 cookie 或 session 保存 HTTP 通信的信息。

## cookie

- 原理如下：
  - Web 服务器将各个客户端的某些信息（比如用户名、凭证）保存在客户端的 cookie 文件中。
  - 当客户端下一次发出 HTTP 请求时，可以在请求报文的 headers 中填入 cookie 数据，从而告知上一次 HTTP 通信的信息。
  - Web 浏览器访问某个网站时会自动使用、且仅使用该网站的 cookie ，将它填入请求报文的 headers 中。
- cookie 保存在客户端上，可能被泄露、篡改、盗用，是不安全的。因此服务器应该采取以下措施：
  - 如果数据不重要，可以直接存放到 cookie 中。比如客户端上一次 HTTP 通信的状态。
  - 如果数据是需要保密的，则加密后再存放到 cookie 中。
  - 如果数据是客户端的某种凭证，则要防止篡改、伪造。还要设置过期时间，过期之后服务器就不认。

## session

- session 是一种比 cookie 更安全的保存信息的方法，原理如下：
  - Web 服务器将每个客户端的信息保存在服务器上，只给每个客户端分配一个唯一的 session id ，用于分辨客户端的身份。
  - 客户端每次发出 HTTP 请求时，可以将 session id 放在 cookie 或报文 body、URL 中传给服务器。
  - 服务器会根据 session id 找到相应的 session ，载入该客户端的信息。
- session 可以保存在服务器上的数据库、文件、或缓存中。
- session 通常要设置过期时间，过期之后服务器就不认。
