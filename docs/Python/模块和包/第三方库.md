第三方库



除了使用 Python 官方的标准库
  - [Python 标准库列表](https://docs.python.org/3/library/index.html)

还可以使用其他用户发布的第三方库。
- 第三方库一般安装在Python解释器的安装目录的site-packages目录下，比如/usr/lib/Python3.6/site-packages/。


## 制作第三方库。
distutils：Python的标准库，可用于打包、安装Python库，但功能简单。
setuptools：Python的第三方库，相当于改进版的distutils。

通常编写一个setup.py文件，用于打包Python库。如下：

import setuptools

setuptools.setup(
    name='pyexiv2',        # 该第三方库的名字
    version='2.0.0',        # 该第三方库的版本
    author='LeoHsiao',
    author_email='leohsiao@foxmail.com',
    description='Read/Write metadata of digital image, including EXIF, IPTC, XMP.',
    url='https://github.com/...',    # 项目网址
    install_requires=['pybind11==2.4.3'],    # 需要安装的依赖库
    packages=setuptools.find_packages(),
)

打包后的Python库可以保存为 .tar.gz 、.whl 等格式。

## 安装Python第三方库的方法。
- 使用setup.py安装：
  - 下载或拷贝第三方库的源代码到任意目录，其中应该包含setup.py文件，执行以下命令：
python setup.py build
python setup.py install
- 使用easy_install安装。它是一个较老的命令行工具，会调用setup.py进行安装。
- 使用pip安装。pip相当于改进版的easy_install。
##
##
 
♢ pip
## pip：一个命令行工具，用于安装、管理Python的第三方库。
- pip本身也是一个Python的第三方库，会安装到某个Python解释器的site-packages目录下，为这个Python解释器服务。
- 安装：
  - 在Window上，官网的Python安装包自带了pip工具。
  - 在Linux上，使用官方的脚本安装：
wget https://bootstrap.pypa.io/get-pip.py
python3 get-pip.py
rm -f get-pip.py

给当前用户单独安装：
python get-pip.py --user
echo 'export PATH=$PATH:~/.local/bin' >> ~/.bash_profile
source ~/.bash_profile

- 用法：
pip
install <name>            # 安装一个包
install django==2.2.0        # 安装指定版本
    --upgrade            # 安装更新的版本
uninstall <name>            # 卸载一个包
search <name>            # 搜索一个包
list                        # 显示已安装的所有包
-V                        # 显示版本（还会显示该pip绑定到了哪个Python解释器）
-i https://pypi.tuna.tsinghua.edu.cn/simple        # 使用指定的源
  - 可执行 pip install <name> 直接从云端仓库下载第三方库并安装。
  - 也可下载或拷贝第三方库的 .whl 文件到任意目录，然后执行 pip install <name>.whl 安装。
  - 可以用python -m pip命令快速找到某个Python解释器使用的pip。
- 备份当前环境：
pip freeze > requirements.txt            # 将当前pip环境中安装的所有Python库记录下来
pip install -r requirements.txt        # 根据requirements.txt安装Python库，同步pip环境
  - 可以把requirements.txt中不眼熟的库删掉，因为它们可能会被其它库附带安装。
  - 使用requirements.txt并不能解决依赖库冲突的问题：假设库A需要下载库B的2.0版，而库B需要下载库C的3.0版，则安装库B之后，库C就升到了3.0版，导致库A可能运行出错。
## 一些第三方库。
- autopep8：用于将Python代码自动排版成PEP8风格。
- pylint：用于检查Python代码的语法、代码风格。
-
##
##
##
 
♢ virtualenv
## virtualenv：Python的第三方库，用于创建Python的虚拟环境。
- 安装：pip install virtualenv
- 使用virtualenv模块可以给每个Python项目创建一个虚拟环境（实际上是拷贝一份Python解释器），给它们分别安装Python的第三方库，隔离它们的运行环境。
- 用法：
  - 进入一个Python项目的目录，输入以下命令。它会创建一个名为.venv的文件夹，将系统Python解释器的安装目录拷贝进去（默认只会拷贝pip、setuptools、wheel三个包）。
virtualenv .venv
        -p C:\Users\Leo\AppData\Local\Programs\Python\Python37\Python.exe
# 指定要使用的Python解释器（默认使用安装virtualenv的那个）
  - 输入以下命令进入该虚拟环境的终端，此时使用pip命令安装的第三方库都会保存在.venv文件夹中。
.venv\Scripts\activate.bat
  - 输入以下命令退出该虚拟环境的终端。
deactivate
##
##
##
 