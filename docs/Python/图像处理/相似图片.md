# 相似图片


## 图片相似度。
- 用MD5等加密哈希算法可以判断两张图片是否为同一文件，但不能判断两张图片的相似度。
- 判断图片相似度的哈希算法通常采用以下策略：
  - 缩小图片的分辨率、减少颜色通道数，以便简化分析。
  - 按某种算法计算出每张图片的哈希值（又称为特征值），再根据两个哈希值的汉明距离判断图片的相似度。
  - 相似度 = 1 - ( 汉明距离/哈希值长度 )
- 汉明距离（Hamming Distance）：两个长度相同的字符串之间，不同的对应位的数量（异或运算）。
## 衡量图片哈希算法的指标。
- 能否识别图像相似、只是有细节差异的图片。
- 能否识别图像相似、但分辨率不同的图片。
- 能否识别图案相似、只是颜色不同的图片。
- 处理图片的耗时。
- 判断相似度的准确性。
## 平均哈希算法（average Hash，aHash）
- 步骤：
1.    将图片缩小到8×8分辨率。（这样就只需考虑64个像素点）
2.    将图片转换成灰度图。（这样就只需考虑一个颜色通道）
3.    计算64个像素点的灰度平均值。
4.    将每个像素点的灰度值与平均值作比较，如果大于或等于平均值则计1，否则计0。最后得到一个64位的哈希值。
- 特点：
  - 不能考虑图片细节的差异，适合计算缩略图的哈希值。
  - 不能适应图片分辨率的变化。将同一张图片放大、缩小，aHash值会变化很大。
## 梯度哈希算法（difference，dHash）
- 步骤：
1.    将图片缩小到9×8辨率。
2.    转换成灰度图。
3.    比较每对相邻像素点的灰度值，如果前一个像素点的灰度值大于等于后一个像素点则记1。否则计0。最后得到一个64位的哈希值。
比如[254, 254, 255, 253]经过计算之后得到[1, 0, 1]。
- 
## 感知哈希算法（perception Hash，pHash）：基于离散余弦变换（DCT）。
- 步骤：
1.    将图片缩小到指定分辨率。
2.    转换成灰度图。
3.    计算灰度图的DCT变换，得到一个32×32的DCT矩阵。可以只取矩阵左上角的8×8部分，计算其平均值。
4.    将每个像素点的灰度值与平均值作比较，如果大于或等于平均值则计1，否则计0。最后得到一个64位的哈希值。
- 特点：
  - 能考虑图片细节的差异。
  - 计算比较慢。
  - 还能计算音频，视频文件的哈希值。
## 小波哈希算法（wavelet Hash，wHash）：基于离散小波变换（DWT）。
- 
- 
## 内容特征法
- 原理：
  - 如果两张图片的黑白轮廓相似，那么它们的内容可能也相似。
  - 在色阶0~255中选择一个阙值，把图片从灰度图转换成黑白图。
- 
## SIFT算法
- 
- 
  - 能适应图片分辨率的变化。
  - 能适应图片的旋转。
