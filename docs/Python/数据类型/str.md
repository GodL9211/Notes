# str


## 编码格式

- 如果一个字符的编码值超过一个字节，则称为宽字符。
- 如果一个数据类型的长度超过 1 个字节，则需要考虑字节序的问题：
  - 大端序（Big-Endian）：高位字节先存储。例如 `0x11223344` 存储为 `0x11 0x22 0x33 0x44`，最高位的字节 0x11 存储在地址的最低位。
  - 小端序（Little-Endian） ：低位字节先存储。例如 `0x11223344` 存储为 `0x44 0x33 0x22 0x11`，最高位的字节 0x11 存储在地址的最高位。


以下编码格式是代表某种字符集，规定了一个字符在存储时的二进制值是什么。

### 单字节编码

- ASCII
  - ：美国信息交换标准代码（American Standard Code for Information Interchange），一种简单、基础的单字节编码格式。
  - 编码范围为 0x00 ~ 0x7F，总共定义了 128 个字符。
  - 收录了拉丁字母、一些控制字符。

- ISO-8859-1
  - ：又称为 Latin-1 ，是一种单字节编码格式，编码范围为 0x00 ~ 0xFF 。
  - 是 ASCII 码的超集。
  - 收录了拉丁字母、希腊语、阿拉伯语等字符。
  - 用到了单字节的所有编码，因此可用于存储其它编码格式的字符，并不会有遗漏。

- Windows 1252
  - ：又称为 cp1252 、ANSI 字符集，是 ISO-8859-1 的超集。

### Unicode

- Unicode
  - ：一种字符集，又称为万国码、国际码、统一码，收录了世界上很多种语言的字符，给每个字符分配了唯一编码。
  - 编码范围为 U+000000 ~ U+10FFFF ，总共大约有 1.1 百万个码位（Code Point），可用于映射字符。
    - 开头两个字节从 U+00 到 U+10 划分为 17 个平面（plane），每个平面包含 2^16=65536 个码位。
    - 第一个平面称为第零平面、基本多语言平面（Basic Multilingual Plane, BMP），其它平面称为辅助平面。
    - 第零平面包含了最常用的字符，其中 D800 ~ DFFF 范围内的码位保留，不映射 Unicode 字符，因此通常被 UTF 编码使用。
  - 每个字符编码为 6 个十六进制数，加上 `U+` 或 `\u` 作为前缀。
    - 只考虑第零平面时，可以只使用 4 个十六进制数，比如字母 A 表示成 U+0041 。

### UTF

- UTF
  - ：Unicode 转换格式（Unicode Transformation Format）
  - Unicode 字符的编码较长，大部分码位都用不到，浪费存储空间。因此实际使用时，通常通过 UTF 转换成更短的编码格式。

- UTF-8
  - ：一种编码格式，兼容 ASCII 码。
  - 其字符的编码长度可变，为 1 ~ 4 个字节。比如存储 ASCII 码字符时只用 1 个字节，存储中文字符时使用 3 个字节。
  - 编码之后的文本，不存在字节序的问题。

- UTF-16
  - ：一种编码格式，不兼容 ASCII 码。
  - 大部分字符的编码长度是 2 字节，少部分不常用的字符则是 4 字节。
  - 编码之后的文本，可以在开头加上两个字节的标记，用于声明字节序，称为 BOM（Byte-Order Mark）。
    - 如果编码格式为 UTF-16 ，且没有 BOM 标记，则由软件自行选择按大端序还是小端序处理。
    - 如果在编码格式名称中声明了字节序，比如 utf-16be 或 utf-16le ，则不必加上 BOM 标记。
  - 根据字节序分类：
    - UTF-16be ：大端序，BOM 标记为 `0xFE 0xFF` 。
    - UTF-16le ：小端序，BOM 标记为 `0xFF 0xFE` 。
  - 例：
    ```py
    >>> ''.encode('utf-16')     # 编码格式名称中没有声明字节序，Python 默认会按小端序处理，在开头加上 BOM 标记
    b'\xff\xfe'
    >>> 'A'.encode('utf-16')
    b'\xff\xfeA\x00'            # 末尾加上空字符 \x00 ，表示结束
    >>> ''.encode('utf-16be')   # 编码格式名称中声明了字节序，不必再加上 BOM 标记
    b''
    >>> 'A'.encode('utf-16le')
    b'A\x00'
    ```

- UTF-32
  - ：一种编码格式，不兼容 ASCII 码。
  - 每个字符的编码长度都是 4 字节。
  - 根据字节序分类：
    - UTF-32be ：大端序，BOM 标记为 `0x0000FEFF` 。
    - UTF-32le ：小端序，BOM 标记为 `0xFFFE0000` 。

### UCS

- UCS
  - ：通用编码字符集（Universal Coded Character Set），由 ISO/IEC 10646 标准定义，相当于 Unicode 字符集的子集。

- UCS-2
  - ：一种编码格式，是 UTF-16 的子集。
  - 只对 Unicode 第零平面的字符进行编码。
  - 每个字符的编码长度都是 2 字节。
  - 根据字节序分类：
    - UCS-2be
    - UCS-2le

- UCS-4
  - ：一种编码格式，是 UTF-32 的超集。
  - 每个字符的编码长度都是 4 字节。

### 中文编码

- BIG5
  - ：一种中文繁体编码格式。

- GBK
  - ：一种中文简体编码格式。
  - 是 GB2312 的超集，收录的字符更多。
  - 中文、英文字符的编码长度都为 2 个字节。
