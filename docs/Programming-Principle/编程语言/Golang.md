# Golang

：Google 于 2009 年推出的编程语言。
- 功能：
  - 是静态语言、强类型语言、编译型语言。
  - 支持面向过程编程、函数式编程。
  - 会自动进行垃圾回收。
  - 不支持继承，但可以通过结构体实现面向对象编程，通过组合的方式实现多态。
- 特点：
  - 运行效率接近 C 语言。
  - 处理并发任务的性能很好，目前已广泛应用于服务器开发、云计算领域。

## 语法特点

- 源文件的后缀名为 .go 。
- 用 // 声明单行注释。
- 定义变量的方式有三种：
  - 用关键字 var 定义变量并声明数据类型（如果创建的变量名已存在则会报错）：
    ```go
    var a int        // Go 的特点是将数据类型放在后面声明
    a = 1
    ```
  - 用关键字 var 定义变量并赋值，会自动判断数据类型：
    ```go
    var a = 1
    ```
  - 用 := 定义变量并赋值，会自动判断数据类型：
    ```go
    a := 1
    ```
- 定义函数：
    ```go
    func fun1(x int, y string) (int) {
        fmt.Println("%d, %s", x, y)
        defer fmt.Println("done")   // 当函数退出时调用该函数
        return 0
    }

    fun1(1, "a")
    ```

## 协程

Go 语言提供了 Goroutines ，可以创建轻量级的协程；还提供了 Channels 机制，用于协程之间的通信。

- 用关键字 go 可以创建一个协程：
    ```go
    go fun1(1, "a")
    ```
  - 当主线程退出时这些协程会被自动终止。

- 协程之间可以通过 channel 类型的变量进行通信：
    ```go
    ch := make(chan int, 100)  // 用关键字 chan 创建一个通道，并设置缓冲区大小为 100
    ch <- 1                    // 写入数据到通道（如果通道不带缓冲或缓冲区已满，则会陷入阻塞）
    v := <-ch                  // 从通道取出数据，并赋值给 v（如果通道为空，则会陷入阻塞）
    close(c)                   // 关闭通道

    for i := range c {         // 遍历通道，如果通道为空就保持阻塞，除非通道被关闭
        fmt.Println(i)
    }
    ```
